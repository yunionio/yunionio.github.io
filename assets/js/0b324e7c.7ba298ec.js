"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[1893],{25559:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(74848),r=t(28453);const i=[];function d(e){const n={admonition:"admonition",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{title:"\u6ce8\u610f\u4e8b\u9879\uff1a",type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u662f\u5e72\u51c0\u7684\u7248\u672c\uff0c\u56e0\u4e3a\u90e8\u7f72\u5de5\u5177\u4f1a\u91cd\u5934\u642d\u5efa\u6307\u5b9a\u7248\u672c\u7684 k3s \u96c6\u7fa4\uff0c\u6240\u4ee5\u786e\u4fdd\u7cfb\u7edf\u6ca1\u6709\u5b89\u88c5 kubernetes, containerd \u7b49\u5bb9\u5668\u7ba1\u7406\u5de5\u5177\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u51b2\u7a81\u5bfc\u81f4\u5b89\u88c5\u5f02\u5e38\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u6700\u4f4e\u914d\u7f6e\u8981\u6c42: CPU 8\u6838, \u5185\u5b58 8GiB, \u5b58\u50a8 200GiB\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u865a\u62df\u673a\u548c\u670d\u52a1\u4f7f\u7528\u7684\u5b58\u50a8\u8def\u5f84\u90fd\u5728 ",(0,s.jsx)(n.strong,{children:"/opt"})," \u76ee\u5f55\u4e0b\uff0c\u6240\u4ee5\u7406\u60f3\u73af\u5883\u4e0b\u5efa\u8bae\u5355\u72ec\u7ed9 ",(0,s.jsx)(n.strong,{children:"/opt"})," \u76ee\u5f55\u8bbe\u7f6e\u6302\u8f7d\u70b9\u3002","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6bd4\u5982\u628a /dev/sdb1 \u5355\u72ec\u5206\u533a\u505a ext4 \u7136\u540e\u901a\u8fc7 /etc/fstab \u6302\u8f7d\u5230 /opt \u76ee\u5f55\u3002"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.p,{children:"\u6839\u636e CPU \u67b6\u6784\u4e0d\u540c\uff0c\u652f\u6301\u7684\u53d1\u884c\u7248\u4e5f\u4e0d\u4e00\u6837\uff0c\u76ee\u524d\u652f\u6301\u7684\u53d1\u884c\u7248\u60c5\u51b5\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"\u6ce8\uff1a3.11\u30013.10\u7b49\uff0c\u8868\u793a\u53d1\u884c\u7248 Release/3.11\u3001Release/3.10\u3002\u5176\u4f59\u540c\u7406\u3002"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Operationg system and Arch"}),(0,s.jsx)(n.th,{children:"3.11"}),(0,s.jsx)(n.th,{children:"3.10"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OpenEuler 22.03 LTS SP3 x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u2705"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OpenEuler 22.03 LTS SP4 x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OpenEuler 24.03 LTS SP2 x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CentOS 7 2009 x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u2705"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CentOS 8 Stream x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CentOS 9 Stream x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CentOS 10 Stream x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Debian 11 x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u2705"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Debian 12 x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Debian 13 x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ubuntu 20.04 LTS x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ubuntu 22.04 LTS x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ubuntu 24.04 LTS x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ubuntu 25.04 x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rocky Linux 8.x  x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rocky Linux 9.x  x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rocky Linux 10.x x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"AlmaLinux 8.x  x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"AlmaLinux 9.x  x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"AlmaLinux 10.x x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OpencloudOS 8.x x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OpencloudOS 9.x x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"AnolisOS 8.x x86_64+aarch64"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]})]})]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},48491:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>x,frontMatter:()=>d,metadata:()=>l,toc:()=>h});var s=t(74848),r=t(28453),i=t(25559);const d={sidebar_position:3,edition:"ce"},c="\u6dfb\u52a0\u8ba1\u7b97\u8282\u70b9",l={id:"getting-started/onpremise/host",title:"\u6dfb\u52a0\u8ba1\u7b97\u8282\u70b9",description:"\u5982\u679c\u8981\u8fd0\u884c\u79c1\u6709\u4e91\u865a\u62df\u673a\uff0c\u9700\u8981\u5148\u6dfb\u52a0\u5bf9\u5e94\u7684\u8ba1\u7b97\u8282\u70b9(\u5bbf\u4e3b\u673a)\uff0c\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u90e8\u7f72\u76f8\u5e94\u7ec4\u4ef6\u3002",source:"@site/docs/getting-started/onpremise/host.md",sourceDirName:"getting-started/onpremise",slug:"/getting-started/onpremise/host",permalink:"/docs/getting-started/onpremise/host",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/getting-started/onpremise/host.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,edition:"ce"},sidebar:"tutorialSidebar",previous:{title:"\u9ad8\u53ef\u7528\u5b89\u88c5",permalink:"/docs/getting-started/onpremise/ha-ce"},next:{title:"\u542f\u7528\u7269\u7406\u673a\u7ba1\u7406\u670d\u52a1",permalink:"/docs/getting-started/onpremise/baremetal"}},o={},h=[{value:"\u73af\u5883",id:"\u73af\u5883",level:2},...i.RM,{value:"\u4f7f\u7528 ocboot \u6dfb\u52a0\u5bf9\u5e94\u8282\u70b9",id:"\u4f7f\u7528-ocboot-\u6dfb\u52a0\u5bf9\u5e94\u8282\u70b9",level:2},{value:"\u6dfb\u52a0\u8282\u70b9",id:"\u6dfb\u52a0\u8282\u70b9",level:3},{value:"\u542f\u7528\u8ba1\u7b97\u8282\u70b9(\u5bbf\u4e3b\u673a)",id:"\u542f\u7528\u8ba1\u7b97\u8282\u70b9\u5bbf\u4e3b\u673a",level:3},{value:"\u521b\u5efa\u865a\u62df\u673a\u6d4b\u8bd5",id:"\u521b\u5efa\u865a\u62df\u673a\u6d4b\u8bd5",level:2},{value:"\u4e0a\u4f20 cirrors \u6d4b\u8bd5\u955c\u50cf",id:"\u4e0a\u4f20-cirrors-\u6d4b\u8bd5\u955c\u50cf",level:3},{value:"\u521b\u5efa\u6d4b\u8bd5\u7f51\u7edc",id:"\u521b\u5efa\u6d4b\u8bd5\u7f51\u7edc",level:3},{value:"\u521b\u5efa\u865a\u62df\u673a",id:"\u521b\u5efa\u865a\u62df\u673a",level:3},{value:"\u5e38\u89c1\u95ee\u9898\u6392\u67e5",id:"\u5e38\u89c1\u95ee\u9898\u6392\u67e5",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"\u6dfb\u52a0\u8ba1\u7b97\u8282\u70b9",children:"\u6dfb\u52a0\u8ba1\u7b97\u8282\u70b9"}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679c\u8981\u8fd0\u884c\u79c1\u6709\u4e91\u865a\u62df\u673a\uff0c\u9700\u8981\u5148\u6dfb\u52a0\u5bf9\u5e94\u7684\u8ba1\u7b97\u8282\u70b9(\u5bbf\u4e3b\u673a)\uff0c\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u90e8\u7f72\u76f8\u5e94\u7ec4\u4ef6\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u8ba1\u7b97\u8282\u70b9\u4e3b\u8981\u8d1f\u8d23\u865a\u62df\u673a\u3001\u7f51\u7edc\u548c\u5b58\u50a8\u7684\u7ba1\u7406\uff0c\u9700\u8981\u5b89\u88c5\u7684\u7ec4\u4ef6\u5982\u4e0b:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"\u7ec4\u4ef6"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"\u7528\u9014"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"host"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"\u7ba1\u7406 kvm \u865a\u62df\u673a\u548c\u5b58\u50a8"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"host-deployer"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"\u865a\u62df\u673a\u90e8\u7f72\u670d\u52a1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"sdnagent"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"\u7ba1\u7406\u865a\u62df\u673a\u7f51\u7edc\u548c\u5b89\u5168\u7ec4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"openvswitch"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"\u865a\u62df\u673a\u7f51\u7edc\u7aef\u53e3\u548c\u6d41\u8868\u914d\u7f6e"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"qemu"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"\u8fd0\u884c\u865a\u62df\u673a"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"\u73af\u5883",children:"\u73af\u5883"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u786c\u4ef6\u8981\u6c42:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Virtualization: CPU \u8981\u652f\u6301\u865a\u62df\u5316\uff0c\u7528\u4e8e\u865a\u62df\u673a KVM \u52a0\u901f"}),"\n",(0,s.jsx)(n.li,{children:"\u6253\u5f00 iommu\uff0cVT-d: \u7528\u4e8e GPU \u900f\u4f20(\u4e0d\u7528GPU\u53ef\u4ee5\u4e0d\u5f00)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u7f51\u7edc:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5f53\u524d\u53ef\u7528\u7684\u7f51\u6bb5: \u865a\u62df\u673a\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u548c\u8ba1\u7b97\u8282\u70b9\u6240\u5728\u7684\u6241\u5e73\u7f51\u6bb5\uff0c\u9700\u8981\u9884\u5148\u5212\u5206\u4fdd\u7559\u5bf9\u5e94\u7aef\u7ed9\u4e91\u5e73\u53f0\u865a\u62df\u673a\u4f7f\u7528\uff0c\u9632\u6b62\u88ab\u5176\u5b83\u8bbe\u5907\u5360\u7528\uff0c\u6700\u540e IP \u51b2\u7a81"}),"\n"]}),"\n"]}),"\n"]}),"\n","\n",(0,s.jsx)(i.Ay,{}),"\n",(0,s.jsx)(n.admonition,{title:"\u5907\u6ce8",type:"tip",children:(0,s.jsx)(n.p,{children:"\u5982\u679c\u662f\u4ee5\u6d4b\u8bd5\u4e3a\u76ee\u7684\uff0c\u53ef\u4ee5\u62ff\u4e00\u53f0\u865a\u62df\u673a\u90e8\u7f72\u8ba1\u7b97\u8282\u70b9\u7684\u670d\u52a1\uff0c\u4f46\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528 KVM \u52a0\u901f\u548c GPU \u900f\u4f20\u3002"})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f7f\u7528-ocboot-\u6dfb\u52a0\u5bf9\u5e94\u8282\u70b9",children:"\u4f7f\u7528 ocboot \u6dfb\u52a0\u5bf9\u5e94\u8282\u70b9"}),"\n",(0,s.jsxs)(n.p,{children:["\u4ee5\u4e0b\u64cd\u4f5c\u5728\u63a7\u5236\u8282\u70b9\u8fdb\u884c\uff0c\u5728\u63a7\u5236\u8282\u70b9\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"ocboot.sh add-node"})," \u547d\u4ee4\u628a\u5bf9\u5e94\u8ba1\u7b97\u8282\u70b9\u6dfb\u52a0\u8fdb\u6765\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u5047\u8bbe\u8981\u7ed9\u63a7\u5236\u8282\u70b9 10.168.26.216 \u6dfb\u52a0\u8ba1\u7b97\u8282\u70b9 10.168.222.140 \u9996\u5148\u9700\u8981 ssh root \u514d\u5bc6\u7801\u767b\u5f55\u5bf9\u5e94\u7684\u8ba1\u7b97\u8282\u70b9\u4ee5\u53ca\u63a7\u5236\u8282\u70b9\u81ea\u8eab\u3002"}),"\n",(0,s.jsx)(n.admonition,{title:"\u6ce8\u610f",type:"tip",children:(0,s.jsx)(n.p,{children:"\u5982\u679c\u662f\u9ad8\u53ef\u7528\u90e8\u7f72\u7684\u73af\u5883\uff0c\u8fd9\u91cc\u6dfb\u52a0\u8282\u70b9\u7684\u63a7\u5236\u8282\u70b9 ip \u4e0d\u8981\u7528 vip \uff0c\u53ea\u80fd\u7528\u7b2c1\u4e2a\u63a7\u5236\u8282\u70b9\u7684\u5b9e\u9645 ip \uff0c\u56e0\u4e3a vip \u6709\u53ef\u80fd\u6f02\u79fb\u5230\u5176\u4ed6\u8282\u70b9\u4e0a\uff0c\u4f46\u901a\u5e38\u53ea\u6709\u7b2c1\u4e2a\u8282\u70b9\u914d\u7f6e\u4e86 ssh \u514d\u5bc6\u767b\u9646\u767b\u9646\u5176\u4ed6\u8282\u70b9\u7684\u6743\u9650\uff0c\u7528\u5176\u4ed6\u63a7\u5236\u8282\u70b9\u4f1a\u5bfc\u81f4 ssh \u767b\u9646\u4e0d\u4e0a\u3002"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# \u5c06\u63a7\u5236\u8282\u70b9\u81ea\u5df1\u8bbe\u7f6e\u6210\u514d\u5bc6\u767b\u5f55\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub root@10.168.26.216\n\n# \u5c1d\u8bd5\u514d\u5bc6\u767b\u5f55\u63a7\u5236\u8282\u70b9\u662f\u5426\u6210\u529f\n$ ssh root@10.168.26.216 "hostname"\n\n# \u5c06\u751f\u6210\u7684 ~/.ssh/id_rsa.pub \u516c\u94a5\u62f7\u8d1d\u5230\u5f85\u90e8\u7f72\u7684\u8ba1\u7b97\u673a\u5668\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub root@10.168.222.140\n\n# \u5c1d\u8bd5\u514d\u5bc6\u767b\u5f55\u5f85\u90e8\u7f72\u673a\u5668\uff0c\u5e94\u8be5\u4e0d\u9700\u8981\u8f93\u5165\u767b\u5f55\u5bc6\u7801\u5373\u53ef\u62ff\u5230\u90e8\u7f72\u673a\u5668\u7684 hostname\n$ ssh root@10.168.222.140 "hostname"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u6dfb\u52a0\u8282\u70b9",children:"\u6dfb\u52a0\u8282\u70b9"}),"\n",(0,s.jsxs)(n.p,{children:["\u4ee5\u4e0b\u547d\u4ee4\u90fd\u662f\u5728\u4e4b\u524d\u90e8\u7f72\u7684\u63a7\u5236\u8282\u70b9\u8fd0\u884c\uff0c\u63a7\u5236\u8282\u70b9\u5e94\u8be5\u63d0\u524d\u5b89\u88c5\u597d\u4e86 ",(0,s.jsx)(n.a,{href:"https://github.com/yunionio/ocboot",children:"ocboot"})," \u90e8\u7f72\u5de5\u5177\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4f7f\u7528 ocboot \u6dfb\u52a0\u8282\u70b9\n$ ./ocboot.sh add-node 10.168.26.216 10.168.222.140\n\n# \u5176\u4ed6\u9009\u9879\uff0c\u4f7f\u7528 '--help' \u53c2\u8003\u5e2e\u52a9\n$ ./ocboot.sh add-node --help\nusage: ocboot.py add-node [-h] [--user SSH_USER] [--key-file SSH_PRIVATE_FILE] [--port SSH_PORT] [--node-port SSH_NODE_PORT]\n                          FIRST_MASTER_HOST TARGET_NODE_HOSTS [TARGET_NODE_HOSTS ...]\n\npositional arguments:\n  FIRST_MASTER_HOST     onecloud cluster primary master host, e.g., 10.1.2.56\n  TARGET_NODE_HOSTS     target nodes ip added into cluster\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --user SSH_USER, -u SSH_USER\n                        primary master host ssh user (default: root)\n  --key-file SSH_PRIVATE_FILE, -k SSH_PRIVATE_FILE\n                        primary master ssh private key file (default: /home/lzx/.ssh/id_rsa)\n  --port SSH_PORT, -p SSH_PORT\n                        primary master host ssh port (default: 22)\n  --node-port SSH_NODE_PORT, -n SSH_NODE_PORT\n                        worker node host ssh port (default: 22)\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8be5\u547d\u4ee4\u4f1a\u4f7f\u7528 ansible-playbook \u628a\u5bf9\u5e94\u7684\u8ba1\u7b97\u8282\u70b9\u52a0\u5165\u8fdb\u6765\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u542f\u7528\u8ba1\u7b97\u8282\u70b9\u5bbf\u4e3b\u673a",children:"\u542f\u7528\u8ba1\u7b97\u8282\u70b9(\u5bbf\u4e3b\u673a)"}),"\n",(0,s.jsx)(n.p,{children:"\u7b49\u8ba1\u7b97\u8282\u70b9\u6dfb\u52a0\u5b8c\u6210\u540e\uff0c\u9700\u8981\u542f\u7528\u521a\u624d\u4e0a\u62a5\u7684\u8ba1\u7b97\u8282\u70b9\uff0c\u53ea\u6709\u542f\u7528\u7684\u5bbf\u4e3b\u673a\u624d\u80fd\u8fd0\u884c\u865a\u62df\u673a\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4f7f\u7528 climc \u67e5\u770b\u6ce8\u518c\u7684 host \u5217\u8868\n$ climc host-list\n+--------------------------------------+-------------------------+-------------------+----------------+----------------------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+------------+-------------------------+--------------+\n|                  ID                  |          Name           |    Access_mac     |   Access_ip    |        Manager_URI         | Status  | enabled | host_status | mem_size | cpu_count | node_count |      sn       | storage_type | host_type  |         version         | storage_size |\n+--------------------------------------+-------------------------+-------------------+----------------+----------------------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+------------+-------------------------+--------------+\n| 3830870e-a499-459d-89df-bb6979b5e1ff | lzx-allinone-standalone | 00:22:39:4c:6c:e9 | 10.168.222.140 | http://10.168.222.140:8885 | running | false   | online      | 8192     | 4         | 1          | Not Specified | rotate       | hypervisor | master(7ab047419092301) | 50141        |\n+--------------------------------------+-------------------------+-------------------+----------------+----------------------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+------------+-------------------------+--------------+\n***  Total: 0 Pages: 0 Limit: 20 Offset: 0 Page: 1  ***\n\n# \u542f\u52a8 host\n$ climc host-enable lzx-allinone-standalone\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u521b\u5efa\u865a\u62df\u673a\u6d4b\u8bd5",children:"\u521b\u5efa\u865a\u62df\u673a\u6d4b\u8bd5"}),"\n",(0,s.jsx)(n.h3,{id:"\u4e0a\u4f20-cirrors-\u6d4b\u8bd5\u955c\u50cf",children:"\u4e0a\u4f20 cirrors \u6d4b\u8bd5\u955c\u50cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4e0b\u8f7d cirros \u6d4b\u8bd5\u955c\u50cf\n$ wget https://iso.yunion.cn/yumrepo-2.10/images/cirros-0.4.0-x86_64-disk.qcow2\n\n# \u5c06\u955c\u50cf\u4e0a\u4f20\u5230 glance\n$ climc image-upload --format qcow2 --os-type Linux --min-disk 10240 cirros-0.4.0-x86_64-disk.qcow2 ./cirros-0.4.0-x86_64-disk.qcow2\n\n# \u67e5\u770b\u4e0a\u4f20\u7684\u955c\u50cf\n$ climc image-list\n+--------------------------------------+--------------------------------+-------------+----------+-----------+----------+---------+--------+----------------------------------+\n|                  ID                  |              Name              | Disk_format |   Size   | Is_public | Min_disk | Min_ram | Status |             Checksum             |\n+--------------------------------------+--------------------------------+-------------+----------+-----------+----------+---------+--------+----------------------------------+\n| 63f6f2af-4db2-4e30-85f5-0ad3baa27bd9 | cirros-0.4.0-x86_64-disk.qcow2 | qcow2       | 22806528 | false     | 30720    | 0       | active | 76dc07d1a730a92d0db7fb2d3c305ecd |\n+--------------------------------------+--------------------------------+-------------+----------+-----------+----------+---------+--------+----------------------------------+\n\n# \u5982\u679c\u4f7f\u7528\u865a\u62df\u673a\u4f5c\u4e3a\u8ba1\u7b97\u8282\u70b9\uff0c\u5b58\u50a8\u53ef\u80fd\u4e0d\u5927\uff0c\u53ef\u4ee5\u628a\u955c\u50cf\u7684\u9ed8\u8ba4\u5927\u5c0f30g\u8c03\u6574\u523010g\n$ climc image-update --min-disk 10240 cirros-0.4.0-x86_64-disk.qcow2\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u521b\u5efa\u6d4b\u8bd5\u7f51\u7edc",children:"\u521b\u5efa\u6d4b\u8bd5\u7f51\u7edc"}),"\n",(0,s.jsx)(n.p,{children:"\u4e0b\u9762\u662f\u968f\u673a\u521b\u5efa\u4e86\u4e00\u4e2a\u4e3b\u673a\u95f4\u4e0d\u53ef\u8fbe\u7684\u7f51\u7edc\u7528\u4e8e\u6d4b\u8bd5\uff0c\u5982\u679c\u6709\u5212\u5206\u597d\u7684\u6241\u5e73\u4e8c\u5c42\u53ef\u7528\u7f51\u7edc\uff0c\u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u7ed9\u865a\u62df\u673a\u4f7f\u7528\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ climc network-create --gateway 10.20.30.1 --server-type guest bcast0 vnet0 10.20.30.2 10.20.30.254 24\n$ climc network-public vnet0\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u521b\u5efa\u865a\u62df\u673a",children:"\u521b\u5efa\u865a\u62df\u673a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efa\u865a\u62df\u673a testvm01\uff0c512M\u5185\u5b58, 1\u4e2aCPU, \u7cfb\u7edf\u76d8 10g, \u7b2c\u4e8c\u5757\u78c1\u76d8 5g \u683c\u5f0f\u5316\u4e3a ext4 \u5e76\u6302\u8f7d\u5230 /opt \u7684\u865a\u62df\u673a\n$ climc server-create  --auto-start --allow-delete \\\n\t\t--disk cirros-0.4.0-x86_64-disk.qcow2:10g --disk 5g:ext4:/opt \\\n\t\t--net vnet0 --ncpu 1 --mem-spec 512M testvm01\n\n# \u67e5\u770b\u521b\u5efa\u7684\u865a\u62df\u673a\uff0c1\u5206\u949f\u540e\u5e94\u8be5\u4f1a\u53d8\u4e3a running \u72b6\u6001\n$ climc server-list --details --scope system\n+--------------------------------------+----------+--------------+--------------+-------+---------+------------+-----------+----------+-----------------------------+------------+---------+-------------------------+--------+-----------+\n|                  ID                  |   Name   | Billing_type |     IPs      | Disk  | Status  | vcpu_count | vmem_size | Secgroup |         Created_at          | Hypervisor | os_type |          Host           | Tenant | is_system |\n+--------------------------------------+----------+--------------+--------------+-------+---------+------------+-----------+----------+-----------------------------+------------+---------+-------------------------+--------+-----------+\n| bcda7d18-decc-4b5f-8654-2d201a84d1fb | testvm01 | postpaid     | 10.20.30.254 | 35840 | running | 1          | 512       | Default  | 2019-09-23T05:08:49.000000Z | kvm        | Linux   | lzx-allinone-standalone | system | false     |\n+--------------------------------------+----------+--------------+--------------+-------+---------+------------+-----------+----------+-----------------------------+------------+---------+-------------------------+--------+-----------+\n***  Total: 0 Pages: 0 Limit: 20 Offset: 0 Page: 1  ***\n\n# \u83b7\u53d6\u865a\u62df\u673a\u767b\u5f55\u4fe1\u606f\n$ climc server-logininfo testvm01\n+-----------+------------------------------------------+\n|   Field   |                  Value                   |\n+-----------+------------------------------------------+\n| login_key | 49wqh5OWGW3jSr1A8RfrMoH69iRRECzaMZITBA== |\n| password  | zS27FwwUFr96                             |\n| updated   | 2019-09-23T05:11:29.306403Z              |\n| username  | root                                     |\n+-----------+------------------------------------------+\n\n# \u5728\u8ba1\u7b97\u8282\u70b9\u8054\u901a\u6d4b\u8bd5\u7f51\u7edc(\u5982\u679c\u4f60\u662f\u76f4\u63a5\u7528\u7684\u4e8c\u5c42\u7f51\u7edc\uff0c\u5e94\u8be5\u80fd\u76f4\u63a5 ping \u901a\u865a\u62df\u673a\u7684 ip \u4e86\uff0c\u4e0d\u9700\u8981\u505a\u8fd9\u4e00\u6b65)\n$ ip address add 10.20.30.1/24 dev br0\n\n$ ping 10.20.30.254\nPING 10.20.30.254 (10.20.30.254) 56(84) bytes of data.\n64 bytes from 10.20.30.254: icmp_seq=1 ttl=64 time=1.31 ms\n\n# \u7528\u4e4b\u524d server-logininfo \u547d\u4ee4\u83b7\u53d6\u7684\u7528\u6237\u540d\u5bc6\u7801\uff0c\u76f4\u63a5\u767b\u5f55\u5230\u865a\u62df\u673a\u91cc\u9762\n$ ssh root@10.20.30.254\n\n# \u5982\u679c\u7f51\u7edc\u4e0d\u901a\uff0c\u4e5f\u53ef\u4ee5\u767b\u5f55\u524d\u7aef\u901a\u8fc7 vnc \u7684\u65b9\u5f0f\u6253\u5f00\u865a\u62df\u673a\u7684 tty \u767b\u5f55\u754c\u9762\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898\u6392\u67e5",children:"\u5e38\u89c1\u95ee\u9898\u6392\u67e5"}),"\n",(0,s.jsxs)(n.p,{children:["\u8ba1\u7b97\u8282\u70b9\u5e38\u89c1\u95ee\u9898\u6392\u67e5\u8bf7\u53c2\u8003\uff1a",(0,s.jsx)(n.a,{href:"../../guides/onpremise/host/troubleshooting",children:"Host\u670d\u52a1\u95ee\u9898\u6392\u67e5"}),"\u3002"]})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>c});var s=t(96540);const r={},i=s.createContext(r);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);